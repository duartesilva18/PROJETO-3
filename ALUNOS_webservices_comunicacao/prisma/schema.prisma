generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["multiSchema"]
  binaryTargets   = ["native", "linux-musl-openssl-3.0.x", "debian-openssl-3.0.x", "windows"]
}

datasource db {
  provider = "sqlserver"
  url      = env("DATABASE_URL")
  schemas  = ["dbo", "exemplo"]
}

model editora {
  id         Int     @id(map: "PK_editora") @default(autoincrement())
  designacao String  @db.NVarChar(250)
  nif        String? @db.NVarChar(20)

  @@schema("exemplo")
}

model im_grupo {
  id_grupo        Int     @id(map: "PK__im_grupo__8B68D688027C92A5") @default(autoincrement())
  designacao      String? @db.NVarChar(50)
  id_unidorganica Int?
  activo          Int?    @db.SmallInt

  @@schema("dbo")
}

model im_grupo_utilizador {
  id_utilizador      String    @db.NVarChar(50)
  id_grupo           Int
  activo_data_inicio DateTime? @db.DateTime
  activo_data_fim    DateTime? @db.DateTime

  @@id([id_utilizador, id_grupo], map: "PK__im_grupo__E973BBEB532FC86A")
  @@index([id_grupo], map: "Missing_IXNC_im_grupo_utilizador_id_grupo_82D94")
  @@schema("dbo")
}

model im_tipo_doc_id {
  id_tipo_doc_id Int     @id(map: "PK__im_tipo___E347922D29125611") @default(autoincrement())
  designacao     String? @db.NVarChar(200)
  abreviatura    String? @db.NVarChar(200)
  activo         Int?    @db.SmallInt

  @@schema("dbo")
}

model im_tipo_vinculo {
  id_tipo_vinculo Int     @id(map: "PK__im_tipo___2302FD59CB02D584") @default(autoincrement())
  designacao      String  @db.NVarChar(50)
  descricao       String? @db.NVarChar(400)
  activo          Int     @db.SmallInt

  @@schema("dbo")
}

model im_utilizador {
  id_utilizador        String    @id(map: "PK__im_utili__71C5368335E18EEA") @db.NVarChar(50)
  id_curso             String?   @db.NVarChar(50)
  num_utilizador       String?   @db.NVarChar(50)
  nome_completo        String?   @db.NVarChar(200)
  id_tipo_doc_id       Int?
  nr_doc_identificacao String?   @db.NVarChar(50)
  nr_nif               String?   @db.NVarChar(50)
  email_interno        String?   @db.NVarChar(100)
  email_externo        String?   @db.NVarChar(100)
  data_nascimento      DateTime? @db.DateTime
  data_criacao         DateTime? @db.DateTime
  observacoes          String?   @db.NVarChar(400)
  activo               Int?      @db.SmallInt
  id_origem_dados      Int?
  salt                 String?   @default(dbgenerated("newid()"), map: "DF__im_utiliza__salt__66603565") @db.UniqueIdentifier
  morada1              String?   @db.NVarChar(255)
  morada2              String?   @db.NVarChar(255)
  cod_postal           String?   @db.NVarChar(10)
  localidade           String?   @db.NVarChar(255)
  pais                 String?   @db.NVarChar(50)
  telemovel            String?   @db.NVarChar(50)
  telefone             String?   @db.NVarChar(50)
  extensao             String?   @db.NVarChar(50)
  nome_apresentacao    String?   @db.NVarChar(255)

  @@index([num_utilizador, activo, id_utilizador], map: "idx_im_utilizador_marrucho")
  @@index([activo], map: "IX_im_utilizador_activo")
  @@index([nr_doc_identificacao], map: "ix_nr_doc_identificacao")
  @@index([id_curso], map: "Missing_IXNC_im_utilizador_id_curso_72DDD")
  @@schema("dbo")
}

model livros {
  id             Int     @id(map: "PK_exemplo.livros") @default(autoincrement())
  designacao     String  @db.NVarChar(250)
  ISBN           String  @db.NVarChar(20)
  preco_unitario Decimal @db.Decimal(18, 2)
  qnt_stock      Int
  editora_id     Int
  autores        String  @db.NVarChar(250)

  @@schema("exemplo")
}

model not_excepcao {
  id_excepcao          Int                   @id(map: "PK__not_exce__B66DB5D909B00272")
  id_tipo_notificacao  Int?
  email_destinatario   String?               @db.NVarChar(255)
  not_tipo_notificacao not_tipo_notificacao? @relation(fields: [id_tipo_notificacao], references: [id_tipo_notificacao], onDelete: NoAction, onUpdate: NoAction, map: "FK__not_excep__id_ti__59063A47")

  @@schema("dbo")
}

model not_notificacao {
  id_notificacao       Int                   @id(map: "PK__not_noti__D5204769BB9AC2E6") @default(autoincrement())
  data_criacao         DateTime?             @db.DateTime
  data_envio           DateTime?             @db.DateTime
  email_destinatario   String?               @db.NVarChar(4000)
  assunto              String?               @db.NVarChar(Max)
  mensagem             String?               @db.NVarChar(Max)
  id_tipo_notificacao  Int?
  estado               Int?
  periodicidade        String?               @db.NVarChar(255)
  identificador_chave  String?               @db.NVarChar(255)
  not_tipo_notificacao not_tipo_notificacao? @relation(fields: [id_tipo_notificacao], references: [id_tipo_notificacao], onDelete: NoAction, onUpdate: NoAction, map: "FK__not_notif__id_ti__5AEE82B9")

  @@schema("dbo")
}

model not_regra {
  id_regra             Int                   @id(map: "PK__not_regr__46D174CEFBEAEA40")
  activa               Boolean
  tabela_base          String?               @db.NVarChar(255)
  trg                  String?               @db.NVarChar(255)
  periodicidade        String?               @db.NVarChar(255)
  assunto              String?               @db.NVarChar(4000)
  mensagem             String?               @db.NVarChar(4000)
  descricao_regra      String?               @db.NVarChar(4000)
  id_tipo_notificacao  Int?
  not_tipo_notificacao not_tipo_notificacao? @relation(fields: [id_tipo_notificacao], references: [id_tipo_notificacao], onDelete: NoAction, onUpdate: NoAction, map: "FK__not_regra__id_ti__748F2482")

  @@schema("dbo")
}

model not_tipo_notificacao {
  id_tipo_notificacao Int               @id(map: "PK__not_tipo__F92D44CEB6448E9A")
  descricao           String?           @db.NVarChar(255)
  not_excepcao        not_excepcao[]
  not_notificacao     not_notificacao[]
  not_regra           not_regra[]

  @@schema("dbo")
}

model org_membros {
  id_membro                 Int              @id(map: "PK__org_memb__4CD20D5B2C7E77EA") @default(autoincrement())
  id_unidade                Int?
  id_funcionario            String?          @db.NVarChar(50)
  id_tipo_membro            Int?
  percentagem               Float?
  data                      DateTime?        @db.Date
  id_user                   String?          @db.NVarChar(50)
  activo                    Boolean?
  hasVotoQualidade          Boolean?
  id_funcionario_substituto String?          @db.NVarChar(50)
  data_fim                  DateTime?        @db.Date
  data_ini_func             DateTime?        @db.DateTime
  data_fim_func             DateTime?        @db.DateTime
  descricao_cargo           String?          @db.NVarChar(255)
  id_cargo                  Int?
  id_documento              Int?
  org_tipo_membro           org_tipo_membro? @relation(fields: [id_tipo_membro], references: [id_tipo_membro], onDelete: NoAction, onUpdate: NoAction, map: "FK__org_membr__id_ti__11957784")
  org_unidade               org_unidade?     @relation(fields: [id_unidade], references: [id_unidade], onDelete: NoAction, onUpdate: NoAction, map: "FK__org_membr__id_un__12899BBD")

  @@schema("dbo")
}

model org_organica {
  id_organica Int
  descricao   String?       @db.NVarChar(255)
  versao      Int
  activo      Boolean?
  data        DateTime?     @db.Date
  estado      Int?
  sigla       String?       @db.NVarChar(255)
  id_user     String?       @db.NVarChar(255)
  data_fim    DateTime?     @db.Date
  org_unidade org_unidade[]

  @@id([id_organica, versao], map: "PK__org_orga__CAE2E5F1FA9AA41C")
  @@schema("dbo")
}

model org_tipo_membro {
  id_tipo_membro Int           @id(map: "PK__org_tipo__7210C2DA752C4367")
  descricao      String?       @db.NVarChar(255)
  org_membros    org_membros[]

  @@schema("dbo")
}

model org_tipo_unidade {
  id_tipo_unidade Int           @id(map: "PK__org_tipo__B275567A3513BDEB") @default(autoincrement())
  descricao       String?       @db.NVarChar(255)
  estatutos       Boolean?
  org_unidade     org_unidade[]

  @@schema("dbo")
}

model org_unidade {
  id_unidade            Int               @id(map: "PK__org_unid__0B6FAEC43ACC9741") @default(autoincrement())
  descricao             String?           @db.NVarChar(255)
  id_unidade_pai        Int?
  id_tipo_unidade       Int?
  id_organica           Int?
  activo                Boolean?
  sigla                 String?           @db.NVarChar(255)
  id_referencia         String?           @db.NVarChar(10)
  versao                Int?
  data                  DateTime?         @db.Date
  id_user               String?           @db.NVarChar(255)
  isColegial            Boolean?
  id_tipologia_decisao  Int?
  percentagem           Decimal?          @db.Decimal(18, 0)
  data_fim              DateTime?         @db.Date
  isGlobal              Int?              @default(0, map: "DF__org_unida__isGlo__6754599E")
  permiteEncaminhamento Int?              @default(1, map: "DF__org_unida__permi__68487DD7")
  org_membros           org_membros[]
  org_tipo_unidade      org_tipo_unidade? @relation(fields: [id_tipo_unidade], references: [id_tipo_unidade], onDelete: NoAction, onUpdate: NoAction, map: "FK__org_unida__id_ti__1471E42F")
  org_organica          org_organica?     @relation(fields: [id_organica, versao], references: [id_organica, versao], onDelete: NoAction, onUpdate: NoAction, map: "FK__org_unidade__15660868")

  @@schema("dbo")
}

model pn_anexos {
  id_anexo               String      @id(map: "PK__pn_anexo__F5D8C19E3E410E05") @default(dbgenerated("newid()"), map: "DF__pn_anexos__id_an__693CA210") @db.UniqueIdentifier
  nome_ficheiro          String?     @db.VarChar(255)
  tipo                   String?     @db.VarChar(50)
  id_noticia_FK          String?     @db.UniqueIdentifier
  nome_original_ficheiro String?     @db.NVarChar(255)
  code_rede_social       String?     @db.VarChar(5)
  pn_noticia             pn_noticia? @relation(fields: [id_noticia_FK], references: [id_noticia], onDelete: NoAction, onUpdate: NoAction, map: "FK__pn_anexos__id_no__7C4F7684")

  @@schema("dbo")
}

model pn_categoria {
  id_categoria String       @id(map: "PK__pn_categ__CD54BC5A9AD62832") @default(dbgenerated("newid()"), map: "DF__pn_catego__id_ca__6A30C649") @db.UniqueIdentifier
  nome         String       @db.VarChar(100)
  descricao    String?      @db.Text
  status       String?      @default("Ativo", map: "DF__pn_catego__statu__6B24EA82") @db.VarChar(20)
  pn_noticia   pn_noticia[]

  @@schema("dbo")
}

model pn_noticia {
  id_noticia      String           @id(map: "PK__pn_notic__1D4A6BA1793B260F") @default(dbgenerated("newid()"), map: "DF__pn_notici__id_no__6C190EBB") @db.UniqueIdentifier
  titulo          String           @db.VarChar(255)
  texto           String?          @db.Text
  texto_linkedin  String?          @db.Text
  texto_facebook  String?          @db.Text
  texto_instagram String?          @db.Text
  texto_twitter   String?          @db.Text
  estado          String?          @default("Rascunho", map: "DF__pn_notici__estad__6D0D32F4") @db.VarChar(20)
  data_criacao    DateTime?        @default(now(), map: "DF__pn_notici__data___6E01572D") @db.DateTime
  id_categoria_FK String?          @db.UniqueIdentifier
  texto_tiktok    String?          @db.Text
  tipo            Int?
  emails          String?          @db.NVarChar(Max)
  id_pedido       Int?
  pn_anexos       pn_anexos[]
  pn_categoria    pn_categoria?    @relation(fields: [id_categoria_FK], references: [id_categoria], onDelete: NoAction, onUpdate: NoAction, map: "FK__pn_notici__id_ca__7D439ABD")
  pn_noticia_Tag  pn_noticia_Tag[]
  pn_rs_noticia   pn_rs_noticia[]
  pn_agendamento_rede pn_agendamento_rede[]

  @@schema("dbo")
}

model pn_noticia_Tag {
  id_noticia String     @db.UniqueIdentifier
  id_tag     String     @db.UniqueIdentifier
  pn_noticia pn_noticia @relation(fields: [id_noticia], references: [id_noticia], onUpdate: NoAction, map: "FK__pn_notici__id_no__7F2BE32F")
  pn_tag     pn_tag     @relation(fields: [id_tag], references: [id_tag], onUpdate: NoAction, map: "FK__pn_notici__id_ta__00200768")

  @@id([id_noticia, id_tag], map: "PK__pn_notic__1BE8F3DEE479C58A")
  @@schema("dbo")
}

model pn_radio_jornal {
  id_radio_jornal String   @id(map: "pn_radio_jornal_pk") @default(dbgenerated("newid()"), map: "DF__pn_radio___id_ra__6EF57B66") @db.UniqueIdentifier
  nome            String   @db.VarChar(Max)
  email           String   @unique(map: "pn_radio_jornal_pk_2") @db.VarChar(255)
  data_criacao    DateTime @default(now(), map: "DF__pn_radio___data___6FE99F9F") @db.DateTime

  @@schema("dbo")
}

model pn_redes_sociais {
  id_rede_social String          @id(map: "PK__pn_redes__7BCAAC39FF4FAB43") @default(dbgenerated("newid()"), map: "DF__pn_redes___id_re__70DDC3D8") @db.UniqueIdentifier
  nome           String          @db.VarChar(255)
  pn_rs_noticia  pn_rs_noticia[]
  pn_agendamento_rede pn_agendamento_rede[]

  @@schema("dbo")
}

model pn_rs_noticia {
  id_rede_social_FK String           @db.UniqueIdentifier
  id_noticia_FK     String           @db.UniqueIdentifier
  pn_noticia        pn_noticia       @relation(fields: [id_noticia_FK], references: [id_noticia], onUpdate: NoAction, map: "FK__pn_rs_not__id_no__01142BA1")
  pn_redes_sociais  pn_redes_sociais @relation(fields: [id_rede_social_FK], references: [id_rede_social], onUpdate: NoAction, map: "FK__pn_rs_not__id_re__02084FDA")

  @@id([id_rede_social_FK, id_noticia_FK], map: "PK__pn_rs_no__975B4F0D81DEAF49")
  @@schema("dbo")
}

model pn_agendamento_rede {
  id_agendamento   String          @id(map: "PK__pn_agend__3214EC2799999999") @default(dbgenerated("newid()")) @db.UniqueIdentifier
  id_noticia       String          @db.UniqueIdentifier
  id_rede_social   String          @db.UniqueIdentifier
  horario_agendado DateTime        @db.DateTime
  fuso_horario     String          @default("Europe/Lisbon") @db.VarChar(64)
  status           String          @default("pendente") @db.VarChar(20)
  tentativas       Int             @default(0)
  ultima_execucao  DateTime?       @db.DateTime
  mensagem_erro    String?         @db.NVarChar(1000)
  data_criacao     DateTime        @default(now()) @db.DateTime
  data_atualizacao DateTime        @default(now()) @updatedAt @db.DateTime
  pn_noticia       pn_noticia      @relation(fields: [id_noticia], references: [id_noticia], onDelete: Cascade, onUpdate: NoAction, map: "FK__pn_agend__id_no__09090909")
  pn_redes_sociais pn_redes_sociais @relation(fields: [id_rede_social], references: [id_rede_social], onDelete: Cascade, onUpdate: NoAction, map: "FK__pn_agend__id_re__08080808")

  @@unique([id_noticia, id_rede_social], map: "UQ__pn_agendamento_rede")
  @@schema("dbo")
}

model pn_tag {
  id_tag         String           @id(map: "PK__pn_tag__6A2987F1A60EE6EA") @default(dbgenerated("newid()"), map: "DF__pn_tag__id_tag__71D1E811") @db.UniqueIdentifier
  nome           String           @db.VarChar(100)
  status         String?          @default("Ativo", map: "DF__pn_tag__status__72C60C4A") @db.VarChar(20)
  pn_noticia_Tag pn_noticia_Tag[]

  @@schema("dbo")
}

model vendas {
  id             Int     @id(map: "PK_vendas") @default(autoincrement())
  livro_id       Int
  preco_unitario Decimal @db.Decimal(18, 2)
  qnt            Int
  preco_total    Decimal @db.Decimal(18, 2)
  iva            Decimal @db.Decimal(18, 2)
  id_utilizador  String  @db.NVarChar(50)

  @@schema("exemplo")
}
